<!doctype html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<script src="../../wsg/js/wsg_include.js"></script>
<script>include.meta()</script>
<script>include.head()</script>
<script type="application/javascript">
	function draw11(){
		var canvas = document.getElementById('canvas11');
		var ctx = canvas.getContext('2d');

		var ball = {
			x: 100,
			y: 100,
			vx: 5,
			vy: 2,
			radius: 25,
			color: 'blue',
			draw: function(){
				ctx.beginPath();
				ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
				ctx.closePath();
				ctx.fillStyle = this.color;
				ctx.fill();
			}
		}
		ball.draw();
		function clear() {
			ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
			ctx.fillRect(0,0,canvas.width,canvas.height);
		}
		function draw(){
			clear();
			ball.draw();
			// ctx.clearRect(0, 0, canvas.width, canvas.height);
			ball.draw();
			ball.x += ball.vx;
			ball.y += ball.vy;
			// 경계
			if (ball.y + ball.vy > canvas.height || ball.y + ball.vy < 0) {
				ball.vy = -ball.vy;
			}
			if (ball.x + ball.vx > canvas.width || ball.x + ball.vx < 0) {
				ball.vx = -ball.vx;
			}
			// 가속도
			ball.vy *= .99;
			ball.vy += .25;

			raf = window.requestAnimationFrame(draw);
		}

		canvas.addEventListener('mouseover', function(e){
			raf = window.requestAnimationFrame(draw);
			running = true;
		})
		canvas.addEventListener('mouseout', function(e){
			window.cancelAnimationFrame(raf);
			running = false;
		})

	}
	window.onload = function(){
		draw11();
	}
</script>
</head>
<body>
<div id="g-wrapper">
	<script>include.header()</script>
	<div id="g-container">
		<script>include.aside.init()</script>

		<!-- Content -->
		<article id="g-content">
			<div class="g-content-header">
				<h1 class="g-h1">고급 애니메이션</h1>
			</div>
			<div class="g-content-body">
				<!-- Section -->
				<section class="g-section g-in-sec">
					<div class="g-section-header">
						<h2 class="g-h2">그리기</h2>
					</div>
					<div class="g-section-body">
						<div class="g-example-wrap">
							<div class="g-example-body">
								<div class="g-example-preview">
									<canvas id="canvas11" width="600" height="300"></canvas>
								</div>
							</div>
							<div class="g-example-footer is-active">
								<pre class="brush:html">
									<!-- HTML -->
									&lt;canvas id="canvas11" width="150" height="150"&gt;&lt;/canvas&gt;
								</pre>
							</div>
						</div>
						<h3 class="g-h3">공 그리기</h3>
						<div class="g-example-wrap">
							<div class="g-example-footer is-active">
								<pre class="brush:js">
									var canvas = document.getElementById('canvas');
									var ctx = canvas.getContext('2d');

									var ball = {
									  x: 100,
									  y: 100,
									  radius: 25,
									  color: 'blue',
									  draw: function() {
										ctx.beginPath();
										ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
										ctx.closePath();
										ctx.fillStyle = this.color;
										ctx.fill();
									  }
									};

									ball.draw();
								</pre>
							</div>
						</div>
						<h3 class="g-h3">속도 추가하기</h3>
						<div class="g-example-wrap">
							<div class="g-example-footer is-active">
								<pre class="brush:js">
									var canvas = document.getElementById('canvas');
									var ctx = canvas.getContext('2d');
									var raf;

									var ball = {
									  x: 100,
									  y: 100,
									  vx: 5,
									  vy: 2,
									  radius: 25,
									  color: 'blue',
									  draw: function() {
										ctx.beginPath();
										ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
										ctx.closePath();
										ctx.fillStyle = this.color;
										ctx.fill();
									  }
									};

									function draw() {
									  ctx.clearRect(0,0, canvas.width, canvas.height);
									  ball.draw();
									  ball.x += ball.vx;
									  ball.y += ball.vy;
									  raf = window.requestAnimationFrame(draw);
									}

									canvas.addEventListener('mouseover', function(e) {
									  raf = window.requestAnimationFrame(draw);
									});

									canvas.addEventListener('mouseout', function(e) {
									  window.cancelAnimationFrame(raf);
									});

									ball.draw();
								</pre>
							</div>
						</div>
						<h3 class="g-h3">경계</h3>
						<div class="g-example-wrap">
							<div class="g-example-footer is-active">
								<pre class="brush:js">
									if (ball.y + ball.vy > canvas.height || ball.y + ball.vy < 0) {
										ball.vy = -ball.vy;
									}
									if (ball.x + ball.vx > canvas.width || ball.x + ball.vx < 0) {
										ball.vx = -ball.vx;
									}
								</pre>
							</div>
						</div>
						<h3 class="g-h3">가속</h3>
						<div class="g-example-wrap">
							<div class="g-example-footer is-active">
								<pre class="brush:js">
									ball.vy *= .99;
									ball.vy += .25;
								</pre>
							</div>
						</div>
						<h3 class="g-h3">후행 효과</h3>
						<div class="g-example-wrap">
							<div class="g-example-footer is-active">
								<pre class="brush:js">
									ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
									ctx.fillRect(0, 0, canvas.width, canvas.height);
								</pre>
							</div>
						</div>
						<h3 class="g-h3">마우스 컨트롤 추가하기</h3>
						<div class="g-example-wrap">
							<div class="g-example-footer is-active">
								<pre class="brush:js">
									var canvas = document.getElementById('canvas');
									var ctx = canvas.getContext('2d');
									var raf;
									var running = false;

									var ball = {
									  x: 100,
									  y: 100,
									  vx: 5,
									  vy: 1,
									  radius: 25,
									  color: 'blue',
									  draw: function() {
										ctx.beginPath();
										ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, true);
										ctx.closePath();
										ctx.fillStyle = this.color;
										ctx.fill();
									  }
									};

									function clear() {
									  ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
									  ctx.fillRect(0,0,canvas.width,canvas.height);
									}

									function draw() {
									  clear();
									  ball.draw();
									  ball.x += ball.vx;
									  ball.y += ball.vy;

									  if (ball.y + ball.vy > canvas.height || ball.y + ball.vy < 0) {
										ball.vy = -ball.vy;
									  }
									  if (ball.x + ball.vx > canvas.width || ball.x + ball.vx < 0) {
										ball.vx = -ball.vx;
									  }

									  raf = window.requestAnimationFrame(draw);
									}

									canvas.addEventListener('mousemove', function(e) {
									  if (!running) {
										clear();
										ball.x = e.clientX;
										ball.y = e.clientY;
										ball.draw();
									  }
									});

									canvas.addEventListener('click', function(e) {
									  if (!running) {
										raf = window.requestAnimationFrame(draw);
										running = true;
									  }
									});

									canvas.addEventListener('mouseout', function(e) {
									  window.cancelAnimationFrame(raf);
									  running = false;
									});

									ball.draw();
								</pre>
							</div>
						</div>
					</div>
				</section>
				<!-- //Section -->
			</div>
		</article>
		<!-- //Content -->

		<script>include.quick.init()</script>
	</div>
	<script>include.footer()</script>
</div>
</body>
</html>